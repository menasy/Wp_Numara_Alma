'use strict';function a42_0x2a83(){const _0x52d3a2=['deserialize','918268dUlZPy','decrypt','decryptWhisperMessage','makeLibSignalRepository','axolotlSenderKeyDistributionMessage','create','GroupSessionBuilder','3432235eeafLM','prototype','550476eOwfJx','msg','public','__esModule','decryptPreKeyWhisperMessage','SenderKeyDistributionMessage','2909752eswBNE','ProtocolAddress','default','GroupCipher','from','generateSignalPubKey','process','SenderKeyName','keys','initOutgoing','69582OiDPva','SessionCipher','groupId','pkmsg','writable','../Settings','310305ksWkQR','sender-key','set','call','SessionRecord','getOwnPropertyDescriptor','get','../JsExeptions','__createBinding','session','pre-key','521284rMSYWW','serialize','configurable','__importStar','toString','encrypt','SenderKeyRecord','registrationId','jidDecode','defineProperty','322lNobUb','private','signedPreKey','keyPair'];a42_0x2a83=function(){return _0x52d3a2;};return a42_0x2a83();}const a42_0x1124c0=a42_0x2527;function a42_0x2527(_0xc5e7f6,_0x541c3b){const _0x2a83a3=a42_0x2a83();return a42_0x2527=function(_0x2527e5,_0x487660){_0x2527e5=_0x2527e5-0x1a5;let _0x371087=_0x2a83a3[_0x2527e5];return _0x371087;},a42_0x2527(_0xc5e7f6,_0x541c3b);}(function(_0x3721a5,_0x3d40df){const _0x4a30af=a42_0x2527,_0x10c01e=_0x3721a5();while(!![]){try{const _0x42e463=parseInt(_0x4a30af(0x1bf))/0x1+parseInt(_0x4a30af(0x1ce))/0x2+parseInt(_0x4a30af(0x1b4))/0x3+parseInt(_0x4a30af(0x1d7))/0x4+-parseInt(_0x4a30af(0x1d5))/0x5+parseInt(_0x4a30af(0x1ae))/0x6*(-parseInt(_0x4a30af(0x1c9))/0x7)+parseInt(_0x4a30af(0x1dd))/0x8;if(_0x42e463===_0x3d40df)break;else _0x10c01e['push'](_0x10c01e['shift']());}catch(_0x19f446){_0x10c01e['push'](_0x10c01e['shift']());}}}(a42_0x2a83,0x592e2));var __createBinding=this&&this[a42_0x1124c0(0x1bc)]||(Object[a42_0x1124c0(0x1d3)]?function(_0x5efde1,_0x169cec,_0x4feb09,_0x35e7c0){const _0x1ed307=a42_0x1124c0;if(_0x35e7c0===undefined)_0x35e7c0=_0x4feb09;var _0x5e6f0f=Object[_0x1ed307(0x1b9)](_0x169cec,_0x4feb09);(!_0x5e6f0f||(_0x1ed307(0x1ba)in _0x5e6f0f?!_0x169cec['__esModule']:_0x5e6f0f[_0x1ed307(0x1b2)]||_0x5e6f0f[_0x1ed307(0x1c1)]))&&(_0x5e6f0f={'enumerable':!![],'get':function(){return _0x169cec[_0x4feb09];}}),Object[_0x1ed307(0x1c8)](_0x5efde1,_0x35e7c0,_0x5e6f0f);}:function(_0xc8475e,_0x41cf27,_0x1503af,_0x77c368){if(_0x77c368===undefined)_0x77c368=_0x1503af;_0xc8475e[_0x77c368]=_0x41cf27[_0x1503af];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a42_0x1124c0(0x1d3)]?function(_0x520c81,_0xd42b58){const _0x13ca6c=a42_0x1124c0;Object[_0x13ca6c(0x1c8)](_0x520c81,'default',{'enumerable':!![],'value':_0xd42b58});}:function(_0x1c821e,_0x29e4cb){const _0x3d501a=a42_0x1124c0;_0x1c821e[_0x3d501a(0x1a6)]=_0x29e4cb;}),__importStar=this&&this[a42_0x1124c0(0x1c2)]||function(_0x554329){const _0x3e70d9=a42_0x1124c0;if(_0x554329&&_0x554329[_0x3e70d9(0x1da)])return _0x554329;var _0x11b565={};if(_0x554329!=null){for(var _0x3b0fc9 in _0x554329)if(_0x3b0fc9!=='default'&&Object[_0x3e70d9(0x1d6)]['hasOwnProperty'][_0x3e70d9(0x1b7)](_0x554329,_0x3b0fc9))__createBinding(_0x11b565,_0x554329,_0x3b0fc9);}return __setModuleDefault(_0x11b565,_0x554329),_0x11b565;};Object[a42_0x1124c0(0x1c8)](exports,a42_0x1124c0(0x1da),{'value':!![]}),exports[a42_0x1124c0(0x1d1)]=void 0x0;const libsignal=__importStar(require('super-libsignal')),JsExeptions_1=require(a42_0x1124c0(0x1bb)),Settings_1=require(a42_0x1124c0(0x1b3)),Internal_1=require('../Internal');function makeLibSignalRepository(_0x36ac9b){const _0x414b6c=signalStorage(_0x36ac9b);return{'decryptGroupMessage'({group:_0x505d38,authorJid:_0x1de305,msg:_0x35abef}){const _0x5f1ff4=a42_0x2527,_0x465e09=jidToSignalSenderKeyName(_0x505d38,_0x1de305),_0x98a4b0=new JsExeptions_1[(_0x5f1ff4(0x1a7))](_0x414b6c,_0x465e09);return _0x98a4b0[_0x5f1ff4(0x1cf)](_0x35abef);},async 'processSenderKeyDistributionMessage'({item:_0x9fc354,authorJid:_0x5a232a}){const _0x2f9d3a=a42_0x2527,_0x42d2d3=new JsExeptions_1[(_0x2f9d3a(0x1d4))](_0x414b6c),_0x322e2c=jidToSignalSenderKeyName(_0x9fc354[_0x2f9d3a(0x1b0)],_0x5a232a),_0x303537=new JsExeptions_1[(_0x2f9d3a(0x1dc))](null,null,null,null,_0x9fc354[_0x2f9d3a(0x1d2)]),{[_0x322e2c]:_0x53b343}=await _0x36ac9b[_0x2f9d3a(0x1ac)][_0x2f9d3a(0x1ba)](_0x2f9d3a(0x1b5),[_0x322e2c]);!_0x53b343&&await _0x414b6c['storeSenderKey'](_0x322e2c,new JsExeptions_1[(_0x2f9d3a(0x1c5))]()),await _0x42d2d3[_0x2f9d3a(0x1aa)](_0x322e2c,_0x303537);},async 'decryptMessage'({jid:_0x1effab,type:_0x3cd40f,ciphertext:_0x51e794}){const _0x317c56=a42_0x2527,_0x3d87ff=jidToSignalProtocolAddress(_0x1effab),_0x204fd5=new libsignal[(_0x317c56(0x1af))](_0x414b6c,_0x3d87ff);let _0x220d7d;switch(_0x3cd40f){case'pkmsg':_0x220d7d=await _0x204fd5[_0x317c56(0x1db)](_0x51e794);break;case _0x317c56(0x1d8):_0x220d7d=await _0x204fd5[_0x317c56(0x1d0)](_0x51e794);break;}return _0x220d7d;},async 'encryptMessage'({jid:_0x540157,data:_0x5b11ba}){const _0x3052e0=a42_0x2527,_0x384bb4=jidToSignalProtocolAddress(_0x540157),_0x4765bd=new libsignal['SessionCipher'](_0x414b6c,_0x384bb4),{type:_0x17822f,body:_0x20da4a}=await _0x4765bd[_0x3052e0(0x1c4)](_0x5b11ba),_0x3b9a8b=_0x17822f===0x3?_0x3052e0(0x1b1):_0x3052e0(0x1d8);return{'type':_0x3b9a8b,'ciphertext':Buffer['from'](_0x20da4a,'binary')};},async 'encryptGroupMessage'({group:_0x157e69,meId:_0x240a0b,data:_0x4482d2}){const _0x2a04da=a42_0x2527,_0x13e5d9=jidToSignalSenderKeyName(_0x157e69,_0x240a0b),_0x5c02d4=new JsExeptions_1[(_0x2a04da(0x1d4))](_0x414b6c),{[_0x13e5d9]:_0x1d5fc8}=await _0x36ac9b[_0x2a04da(0x1ac)][_0x2a04da(0x1ba)]('sender-key',[_0x13e5d9]);!_0x1d5fc8&&await _0x414b6c['storeSenderKey'](_0x13e5d9,new JsExeptions_1['SenderKeyRecord']());const _0x201749=await _0x5c02d4[_0x2a04da(0x1d3)](_0x13e5d9),_0xaf625d=new JsExeptions_1[(_0x2a04da(0x1a7))](_0x414b6c,_0x13e5d9),_0x1be118=await _0xaf625d['encrypt'](_0x4482d2);return{'ciphertext':_0x1be118,'senderKeyDistributionMessage':_0x201749[_0x2a04da(0x1c0)]()};},async 'injectE2ESession'({jid:_0x2e8975,session:_0x43a7ac}){const _0x46c279=a42_0x2527,_0xcb25ee=new libsignal['SessionBuilder'](_0x414b6c,jidToSignalProtocolAddress(_0x2e8975));await _0xcb25ee[_0x46c279(0x1ad)](_0x43a7ac);},'jidToSignalProtocolAddress'(_0x57028d){const _0xe707c0=a42_0x2527;return jidToSignalProtocolAddress(_0x57028d)[_0xe707c0(0x1c3)]();}};}exports[a42_0x1124c0(0x1d1)]=makeLibSignalRepository;const jidToSignalProtocolAddress=_0x472d18=>{const _0x3b297e=a42_0x1124c0,{user:_0x3bc026,device:_0x2472da}=(0x0,Internal_1[_0x3b297e(0x1c7)])(_0x472d18);return new libsignal[(_0x3b297e(0x1a5))](_0x3bc026,_0x2472da||0x0);},jidToSignalSenderKeyName=(_0x433d2c,_0x44a41e)=>{const _0x53a874=a42_0x1124c0;return new JsExeptions_1[(_0x53a874(0x1ab))](_0x433d2c,jidToSignalProtocolAddress(_0x44a41e))[_0x53a874(0x1c3)]();};function signalStorage({creds:_0xc4295c,keys:_0x8d4f80}){const _0x15154f=a42_0x1124c0;return{'loadSession':async _0xe7b4b=>{const _0x5d16de=a42_0x2527,{[_0xe7b4b]:_0x598509}=await _0x8d4f80['get'](_0x5d16de(0x1bd),[_0xe7b4b]);if(_0x598509)return libsignal[_0x5d16de(0x1b8)][_0x5d16de(0x1cd)](_0x598509);},'storeSession':async(_0x36db0f,_0x474d94)=>{const _0x5f1b7a=a42_0x2527;await _0x8d4f80[_0x5f1b7a(0x1b6)]({'session':{[_0x36db0f]:_0x474d94[_0x5f1b7a(0x1c0)]()}});},'isTrustedIdentity':()=>{return!![];},'loadPreKey':async _0x10584c=>{const _0x554ff8=a42_0x2527,_0x23f27a=_0x10584c['toString'](),{[_0x23f27a]:_0x404cb9}=await _0x8d4f80[_0x554ff8(0x1ba)](_0x554ff8(0x1be),[_0x23f27a]);if(_0x404cb9)return{'privKey':Buffer[_0x554ff8(0x1a8)](_0x404cb9[_0x554ff8(0x1ca)]),'pubKey':Buffer[_0x554ff8(0x1a8)](_0x404cb9[_0x554ff8(0x1d9)])};},'removePreKey':_0xd3d410=>_0x8d4f80[_0x15154f(0x1b6)]({'pre-key':{[_0xd3d410]:null}}),'loadSignedPreKey':()=>{const _0x1e327d=_0x15154f,_0xf89e66=_0xc4295c[_0x1e327d(0x1cb)];return{'privKey':Buffer[_0x1e327d(0x1a8)](_0xf89e66[_0x1e327d(0x1cc)][_0x1e327d(0x1ca)]),'pubKey':Buffer[_0x1e327d(0x1a8)](_0xf89e66[_0x1e327d(0x1cc)][_0x1e327d(0x1d9)])};},'loadSenderKey':async _0x440fd8=>{const _0x4c6204=_0x15154f,{[_0x440fd8]:_0x1313c2}=await _0x8d4f80[_0x4c6204(0x1ba)](_0x4c6204(0x1b5),[_0x440fd8]);if(_0x1313c2)return new JsExeptions_1['SenderKeyRecord'](_0x1313c2);},'storeSenderKey':async(_0x39ff36,_0x5dfce3)=>{const _0x12e02b=_0x15154f;await _0x8d4f80[_0x12e02b(0x1b6)]({'sender-key':{[_0x39ff36]:_0x5dfce3[_0x12e02b(0x1c0)]()}});},'getOurRegistrationId':()=>_0xc4295c[_0x15154f(0x1c6)],'getOurIdentity':()=>{const _0x4d66c9=_0x15154f,{signedIdentityKey:_0x3db6d4}=_0xc4295c;return{'privKey':Buffer['from'](_0x3db6d4[_0x4d66c9(0x1ca)]),'pubKey':(0x0,Settings_1[_0x4d66c9(0x1a9)])(_0x3db6d4[_0x4d66c9(0x1d9)])};}};}