'use strict';const a79_0x16992e=a79_0x5119;(function(_0x4e32e4,_0x28c812){const _0x35d40d=a79_0x5119,_0x2e3af5=_0x4e32e4();while(!![]){try{const _0xd59ce1=parseInt(_0x35d40d(0xee))/0x1+-parseInt(_0x35d40d(0x110))/0x2*(parseInt(_0x35d40d(0xf1))/0x3)+-parseInt(_0x35d40d(0x103))/0x4+-parseInt(_0x35d40d(0x106))/0x5*(parseInt(_0x35d40d(0x102))/0x6)+parseInt(_0x35d40d(0xf6))/0x7+parseInt(_0x35d40d(0xdc))/0x8*(parseInt(_0x35d40d(0xfe))/0x9)+parseInt(_0x35d40d(0xdb))/0xa*(-parseInt(_0x35d40d(0xec))/0xb);if(_0xd59ce1===_0x28c812)break;else _0x2e3af5['push'](_0x2e3af5['shift']());}catch(_0x56dff1){_0x2e3af5['push'](_0x2e3af5['shift']());}}}(a79_0x4ec0,0xcc808));Object[a79_0x16992e(0xf2)](exports,a79_0x16992e(0x101),{'value':!![]}),exports[a79_0x16992e(0xe8)]=exports[a79_0x16992e(0x10d)]=exports[a79_0x16992e(0xf4)]=exports[a79_0x16992e(0xe7)]=void 0x0;const util_1=require('util'),zlib_1=require(a79_0x16992e(0xdd)),enc_1=require(a79_0x16992e(0x10e)),Models_1=require(a79_0x16992e(0x100)),Internal_1=require(a79_0x16992e(0x10a)),similary_1=require('../crypto/similary'),msg_1=require('./msg'),mms_1=require(a79_0x16992e(0xf5)),inflatePromise=(0x0,util_1[a79_0x16992e(0xe3)])(zlib_1[a79_0x16992e(0xef)]),downloadHistory=async(_0x4f6fd5,_0x15a039)=>{const _0x272009=a79_0x16992e,_0x52ca28=await(0x0,mms_1[_0x272009(0x105)])(_0x4f6fd5,'md-msg-hist',{'options':_0x15a039}),_0x5cc0d5=[];for await(const _0xeb6f1e of _0x52ca28){_0x5cc0d5['push'](_0xeb6f1e);}let _0x512f98=Buffer['concat'](_0x5cc0d5);_0x512f98=await inflatePromise(_0x512f98);const _0x37ae27=enc_1[_0x272009(0x108)]['HistorySync'][_0x272009(0xfd)](_0x512f98);return _0x37ae27;};function a79_0x4ec0(){const _0x292a7b=['key','participant','push','decode','9KGdcya','archived','../../Models','__esModule','1240620Mvwfyo','1061772LhvZaw','name','downloadContentFromMessage','10UjZUgR','fromMe','proto','FULL','../../Internal','pinned','messageStubType','downloadAndProcessHistorySyncNotification','../../Connection/enc','normalizeMessageContent','35066jCZSHy','pushname','160QNBQSk','8584504rMjMBi','zlib','progress','HistorySync','BIZ_PRIVACY_MODE_TO_BSP','RECENT','toNumber','promisify','messageStubParameters','lastMessageRecvTimestamp','pushnames','downloadHistory','getHistoryMsg','protocolMessage','messageTimestamp','HistorySyncType','555203AKjhwl','PUSH_NAME','663407EJXoGa','inflate','length','63VKYeKI','defineProperty','syncType','processHistoryMessage','./mms','6691398PNrkuF','WAMessageStubType','messages','readOnly'];a79_0x4ec0=function(){return _0x292a7b;};return a79_0x4ec0();}exports[a79_0x16992e(0xe7)]=downloadHistory;const processHistoryMessage=(_0x340697,_0x506cc4)=>{const _0x56d4c2=a79_0x16992e;var _0x5cbc65,_0x41623e,_0x248f05;const _0x4a07ee=[],_0x1cfe69=[],_0x5e27eb=[];_0x506cc4['emit']('sync-progress',_0x340697[_0x56d4c2(0xde)]);switch(_0x340697[_0x56d4c2(0xf3)]){case enc_1[_0x56d4c2(0x108)][_0x56d4c2(0xdf)]['HistorySyncType']['INITIAL_BOOTSTRAP']:case enc_1['proto']['HistorySync'][_0x56d4c2(0xeb)][_0x56d4c2(0xe1)]:case enc_1[_0x56d4c2(0x108)][_0x56d4c2(0xdf)]['HistorySyncType'][_0x56d4c2(0x109)]:for(const _0xf1729 of _0x340697['conversations']){_0x1cfe69[_0x56d4c2(0xfc)]({'id':_0xf1729['id'],'name':_0xf1729['name']||undefined});const _0x36f4c6=_0xf1729[_0x56d4c2(0xf8)]||[];delete _0xf1729['messages'],delete _0xf1729[_0x56d4c2(0xff)],delete _0xf1729['muteEndTime'],delete _0xf1729[_0x56d4c2(0x10b)];for(const _0x22cb6e of _0x36f4c6){const _0x41093a=_0x22cb6e['message'];_0x4a07ee[_0x56d4c2(0xfc)](_0x41093a),!((_0x5cbc65=_0xf1729[_0x56d4c2(0xf8)])===null||_0x5cbc65===void 0x0?void 0x0:_0x5cbc65[_0x56d4c2(0xf0)])&&(_0xf1729[_0x56d4c2(0xf8)]=[{'message':_0x41093a}]),!_0x41093a['key'][_0x56d4c2(0x107)]&&!_0xf1729[_0x56d4c2(0xe5)]&&(_0xf1729[_0x56d4c2(0xe5)]=(0x0,similary_1[_0x56d4c2(0xe2)])(_0x41093a[_0x56d4c2(0xea)])),(_0x41093a[_0x56d4c2(0x10c)]===Models_1[_0x56d4c2(0xf7)][_0x56d4c2(0xe0)]||_0x41093a[_0x56d4c2(0x10c)]===Models_1[_0x56d4c2(0xf7)]['BIZ_PRIVACY_MODE_TO_FB'])&&((_0x41623e=_0x41093a[_0x56d4c2(0xe4)])===null||_0x41623e===void 0x0?void 0x0:_0x41623e[0x0])&&_0x1cfe69['push']({'id':_0x41093a[_0x56d4c2(0xfa)][_0x56d4c2(0xfb)]||_0x41093a[_0x56d4c2(0xfa)]['remoteJid'],'verifiedName':(_0x248f05=_0x41093a['messageStubParameters'])===null||_0x248f05===void 0x0?void 0x0:_0x248f05[0x0]});}(0x0,Internal_1['isJidUser'])(_0xf1729['id'])&&_0xf1729[_0x56d4c2(0xf9)]&&_0xf1729[_0x56d4c2(0xff)]&&delete _0xf1729['readOnly'],_0x5e27eb[_0x56d4c2(0xfc)]({..._0xf1729});}break;case enc_1[_0x56d4c2(0x108)]['HistorySync'][_0x56d4c2(0xeb)][_0x56d4c2(0xed)]:for(const _0x58e53a of _0x340697[_0x56d4c2(0xe6)]){_0x1cfe69[_0x56d4c2(0xfc)]({'id':_0x58e53a['id'],'notify':_0x58e53a[_0x56d4c2(0xda)],'verifiedName':_0x58e53a[_0x56d4c2(0x104)]});}break;}return{'chats':_0x5e27eb,'contacts':_0x1cfe69,'messages':_0x4a07ee};};exports[a79_0x16992e(0xf4)]=processHistoryMessage;const downloadAndProcessHistorySyncNotification=async(_0x133b26,_0x192cb6,_0x461e53)=>{const _0x2ff8e3=a79_0x16992e,_0x34f63c=await(0x0,exports[_0x2ff8e3(0xe7)])(_0x133b26,_0x192cb6);return(0x0,exports[_0x2ff8e3(0xf4)])(_0x34f63c,_0x461e53);};exports[a79_0x16992e(0x10d)]=downloadAndProcessHistorySyncNotification;const getHistoryMsg=_0x8c0777=>{const _0x2362df=a79_0x16992e;var _0x65cafe;const _0xe9fcb6=!!_0x8c0777?(0x0,msg_1[_0x2362df(0x10f)])(_0x8c0777):undefined,_0x279548=(_0x65cafe=_0xe9fcb6===null||_0xe9fcb6===void 0x0?void 0x0:_0xe9fcb6[_0x2362df(0xe9)])===null||_0x65cafe===void 0x0?void 0x0:_0x65cafe['historySyncNotification'];return _0x279548;};function a79_0x5119(_0x5953a0,_0xf360d1){const _0x4ec01d=a79_0x4ec0();return a79_0x5119=function(_0x511960,_0xb63347){_0x511960=_0x511960-0xda;let _0x7b2de7=_0x4ec01d[_0x511960];return _0x7b2de7;},a79_0x5119(_0x5953a0,_0xf360d1);}exports['getHistoryMsg']=getHistoryMsg;