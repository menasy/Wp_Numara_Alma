'use strict';function a88_0x45d5(){const _0x5ae903=['max','createSignalIdentity','keyId','toString','xmppPreKey','1642zgGmcW','signature','list','extractDeviceJids','set','encodeBigEndian','__esModule','nextPreKeyId','getNextPreKeysNode','key','getBinaryNodeChildUInt','S_WHATSAPP_NET','jidDecode','454707MESlZX','defineProperty','KEY_BUNDLE_TYPE','public','devices','6KwegzI','generateSignalPubKey','jid','generateOrGetPreKeys','identity','getBinaryNodeChildBuffer','chunk','415EPycvz','Curve','map','getBinaryNodeChild','signedIdentityKey','assertNodeErrorFree','1350320jTgxtJ','getPreKeys','type','keys','xmppSignedPreKey','pre-key','27WBZbta','2619722kmDzJN','value','../crypto/similary','1644070ATbXVE','firstUnuploadedPreKeyId','key-index','content','attrs','parseAndInjectE2ESessions','54185BFcYwT','../../Connection/mode','skey','registrationId','487140hurDkT','registration','isArray','push','getNextPreKeys','lodash','user','device-list','signedPreKey','../crypto/enc'];a88_0x45d5=function(){return _0x5ae903;};return a88_0x45d5();}const a88_0x36a0ab=a88_0x3d26;(function(_0x593ebc,_0xde28e6){const _0x3a1ba3=a88_0x3d26,_0x15989c=_0x593ebc();while(!![]){try{const _0x3adcde=parseInt(_0x3a1ba3(0xb7))/0x1*(parseInt(_0x3a1ba3(0x9e))/0x2)+-parseInt(_0x3a1ba3(0xab))/0x3+parseInt(_0x3a1ba3(0x8f))/0x4+parseInt(_0x3a1ba3(0x8b))/0x5*(-parseInt(_0x3a1ba3(0xb0))/0x6)+-parseInt(_0x3a1ba3(0x82))/0x7+-parseInt(_0x3a1ba3(0xbd))/0x8+parseInt(_0x3a1ba3(0x81))/0x9*(parseInt(_0x3a1ba3(0x85))/0xa);if(_0x3adcde===_0xde28e6)break;else _0x15989c['push'](_0x15989c['shift']());}catch(_0xbf127b){_0x15989c['push'](_0x15989c['shift']());}}}(a88_0x45d5,0x3d1a7));Object[a88_0x36a0ab(0xac)](exports,a88_0x36a0ab(0xa4),{'value':!![]}),exports[a88_0x36a0ab(0xa6)]=exports['getNextPreKeys']=exports[a88_0x36a0ab(0xa1)]=exports['parseAndInjectE2ESessions']=exports['xmppPreKey']=exports[a88_0x36a0ab(0x7f)]=exports[a88_0x36a0ab(0xb3)]=exports[a88_0x36a0ab(0xbe)]=exports[a88_0x36a0ab(0x9a)]=void 0x0;const lodash_1=require(a88_0x36a0ab(0x94)),mode_1=require(a88_0x36a0ab(0x8c)),Internal_1=require('../../Internal'),enc_1=require(a88_0x36a0ab(0x98)),similary_1=require(a88_0x36a0ab(0x84)),createSignalIdentity=(_0x54ddee,_0x540dc2)=>{const _0x96b1ed=a88_0x36a0ab;return{'identifier':{'name':_0x54ddee,'deviceId':0x0},'identifierKey':(0x0,enc_1[_0x96b1ed(0xb1)])(_0x540dc2)};};exports['createSignalIdentity']=createSignalIdentity;const getPreKeys=async({get:_0x3d25c3},_0x4e0002,_0x213698)=>{const _0x263e5c=a88_0x36a0ab,_0x23186b=[];for(let _0xc3e2e6=_0x4e0002;_0xc3e2e6<_0x213698;_0xc3e2e6++){_0x23186b[_0x263e5c(0x92)](_0xc3e2e6[_0x263e5c(0x9c)]());}return _0x3d25c3(_0x263e5c(0x80),_0x23186b);};exports[a88_0x36a0ab(0xbe)]=getPreKeys;const generateOrGetPreKeys=(_0x299e82,_0x5ee820)=>{const _0x5e3093=a88_0x36a0ab,_0x564eeb=_0x299e82[_0x5e3093(0xa5)]-_0x299e82[_0x5e3093(0x86)],_0x1940f0=_0x5ee820-_0x564eeb,_0x52fea7=_0x299e82['nextPreKeyId']+_0x1940f0-0x1,_0x47d41b={};if(_0x1940f0>0x0)for(let _0x61c88b=_0x299e82[_0x5e3093(0xa5)];_0x61c88b<=_0x52fea7;_0x61c88b++){_0x47d41b[_0x61c88b]=enc_1[_0x5e3093(0xb8)]['generateKeyPair']();}return{'newPreKeys':_0x47d41b,'lastPreKeyId':_0x52fea7,'preKeysRange':[_0x299e82[_0x5e3093(0x86)],_0x5ee820]};};exports['generateOrGetPreKeys']=generateOrGetPreKeys;const xmppSignedPreKey=_0x557270=>({'tag':a88_0x36a0ab(0x8d),'attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,similary_1['encodeBigEndian'])(_0x557270[a88_0x36a0ab(0x9b)],0x3)},{'tag':a88_0x36a0ab(0x83),'attrs':{},'content':_0x557270['keyPair']['public']},{'tag':a88_0x36a0ab(0x9f),'attrs':{},'content':_0x557270[a88_0x36a0ab(0x9f)]}]});exports['xmppSignedPreKey']=xmppSignedPreKey;const xmppPreKey=(_0x54f056,_0xad0812)=>({'tag':a88_0x36a0ab(0xa7),'attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,similary_1[a88_0x36a0ab(0xa3)])(_0xad0812,0x3)},{'tag':a88_0x36a0ab(0x83),'attrs':{},'content':_0x54f056[a88_0x36a0ab(0xae)]}]});exports['xmppPreKey']=xmppPreKey;const parseAndInjectE2ESessions=async(_0x2be1d6,_0x4377d0)=>{const _0x3e0c9f=a88_0x36a0ab,_0x24a226=_0x490141=>_0x490141?{'keyId':(0x0,Internal_1[_0x3e0c9f(0xa8)])(_0x490141,'id',0x3),'publicKey':(0x0,enc_1[_0x3e0c9f(0xb1)])((0x0,Internal_1['getBinaryNodeChildBuffer'])(_0x490141,'value')),'signature':(0x0,Internal_1['getBinaryNodeChildBuffer'])(_0x490141,_0x3e0c9f(0x9f))}:undefined,_0x40df2c=(0x0,Internal_1['getBinaryNodeChildren'])((0x0,Internal_1['getBinaryNodeChild'])(_0x2be1d6,_0x3e0c9f(0xa0)),_0x3e0c9f(0x95));for(const _0x13ccbe of _0x40df2c){(0x0,Internal_1[_0x3e0c9f(0xbc)])(_0x13ccbe);}const _0x5e746d=0x64,_0x3582d6=(0x0,lodash_1[_0x3e0c9f(0xb6)])(_0x40df2c,_0x5e746d);for(const _0x2a5748 of _0x3582d6){await Promise['all'](_0x2a5748[_0x3e0c9f(0xb9)](async _0x5380db=>{const _0x46c090=_0x3e0c9f,_0x1c8de8=(0x0,Internal_1[_0x46c090(0xba)])(_0x5380db,_0x46c090(0x8d)),_0x279f05=(0x0,Internal_1[_0x46c090(0xba)])(_0x5380db,_0x46c090(0xa7)),_0x27e9f1=(0x0,Internal_1[_0x46c090(0xb5)])(_0x5380db,_0x46c090(0xb4)),_0x31697b=_0x5380db[_0x46c090(0x89)][_0x46c090(0xb2)],_0x555b8d=(0x0,Internal_1[_0x46c090(0xa8)])(_0x5380db,'registration',0x4);await _0x4377d0['injectE2ESession']({'jid':_0x31697b,'session':{'registrationId':_0x555b8d,'identityKey':(0x0,enc_1[_0x46c090(0xb1)])(_0x27e9f1),'signedPreKey':_0x24a226(_0x1c8de8),'preKey':_0x24a226(_0x279f05)}});}));}};exports[a88_0x36a0ab(0x8a)]=parseAndInjectE2ESessions;const extractDeviceJids=(_0x521ef0,_0x47d23e,_0x40d29e)=>{const _0x4417a0=a88_0x36a0ab;var _0x23cde4;const {user:_0x44b10b,device:_0x914f4f}=(0x0,Internal_1[_0x4417a0(0xaa)])(_0x47d23e),_0x259375=[];for(const _0x1cb6a8 of _0x521ef0['content']){const _0x14f592=(_0x23cde4=(0x0,Internal_1[_0x4417a0(0xba)])(_0x1cb6a8,_0x4417a0(0xa0)))===null||_0x23cde4===void 0x0?void 0x0:_0x23cde4[_0x4417a0(0x88)];if(_0x14f592&&Array[_0x4417a0(0x91)](_0x14f592))for(const _0x506125 of _0x14f592){const {user:_0x4050be}=(0x0,Internal_1['jidDecode'])(_0x506125[_0x4417a0(0x89)]['jid']),_0x4b249a=(0x0,Internal_1[_0x4417a0(0xba)])(_0x506125,_0x4417a0(0xaf)),_0x521232=(0x0,Internal_1[_0x4417a0(0xba)])(_0x4b249a,_0x4417a0(0x96));if(Array[_0x4417a0(0x91)](_0x521232===null||_0x521232===void 0x0?void 0x0:_0x521232[_0x4417a0(0x88)]))for(const {tag:_0x39ddcc,attrs:_0x2ca9af}of _0x521232[_0x4417a0(0x88)]){const _0x3ac3a9=+_0x2ca9af['id'];_0x39ddcc==='device'&&(!_0x40d29e||_0x3ac3a9!==0x0)&&(_0x44b10b!==_0x4050be||_0x914f4f!==_0x3ac3a9)&&(_0x3ac3a9===0x0||!!_0x2ca9af[_0x4417a0(0x87)])&&_0x259375[_0x4417a0(0x92)]({'user':_0x4050be,'device':_0x3ac3a9});}}}return _0x259375;};function a88_0x3d26(_0x2bc993,_0xb16bc7){const _0x45d5bf=a88_0x45d5();return a88_0x3d26=function(_0x3d26f7,_0x4656a3){_0x3d26f7=_0x3d26f7-0x7e;let _0x5d2c9b=_0x45d5bf[_0x3d26f7];return _0x5d2c9b;},a88_0x3d26(_0x2bc993,_0xb16bc7);}exports[a88_0x36a0ab(0xa1)]=extractDeviceJids;const getNextPreKeys=async({creds:_0x4bd8f6,keys:_0x79abe6},_0x28be2e)=>{const _0x303274=a88_0x36a0ab,{newPreKeys:_0x305d24,lastPreKeyId:_0x27169d,preKeysRange:_0x22be69}=(0x0,exports[_0x303274(0xb3)])(_0x4bd8f6,_0x28be2e),_0x572474={'nextPreKeyId':Math[_0x303274(0x99)](_0x27169d+0x1,_0x4bd8f6[_0x303274(0xa5)]),'firstUnuploadedPreKeyId':Math[_0x303274(0x99)](_0x4bd8f6[_0x303274(0x86)],_0x27169d+0x1)};await _0x79abe6[_0x303274(0xa2)]({'pre-key':_0x305d24});const _0x4e9d3a=await(0x0,exports[_0x303274(0xbe)])(_0x79abe6,_0x22be69[0x0],_0x22be69[0x0]+_0x22be69[0x1]);return{'update':_0x572474,'preKeys':_0x4e9d3a};};exports[a88_0x36a0ab(0x93)]=getNextPreKeys;const getNextPreKeysNode=async(_0x35795d,_0x2f276b)=>{const _0x317aac=a88_0x36a0ab,{creds:_0x4198e6}=_0x35795d,{update:_0x31f640,preKeys:_0x503eac}=await(0x0,exports[_0x317aac(0x93)])(_0x35795d,_0x2f276b),_0x42c4a5={'tag':'iq','attrs':{'xmlns':'encrypt','type':'set','to':Internal_1[_0x317aac(0xa9)]},'content':[{'tag':_0x317aac(0x90),'attrs':{},'content':(0x0,similary_1[_0x317aac(0xa3)])(_0x4198e6[_0x317aac(0x8e)])},{'tag':_0x317aac(0xbf),'attrs':{},'content':mode_1[_0x317aac(0xad)]},{'tag':_0x317aac(0xb4),'attrs':{},'content':_0x4198e6[_0x317aac(0xbb)]['public']},{'tag':_0x317aac(0xa0),'attrs':{},'content':Object[_0x317aac(0x7e)](_0x503eac)[_0x317aac(0xb9)](_0x35322f=>(0x0,exports[_0x317aac(0x9d)])(_0x503eac[+_0x35322f],+_0x35322f))},(0x0,exports[_0x317aac(0x7f)])(_0x4198e6[_0x317aac(0x97)])]};return{'update':_0x31f640,'node':_0x42c4a5};};exports['getNextPreKeysNode']=getNextPreKeysNode;